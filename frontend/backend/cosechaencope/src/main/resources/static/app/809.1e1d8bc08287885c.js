"use strict";(self.webpackChunkcosecha_en_cope=self.webpackChunkcosecha_en_cope||[]).push([[809],{7809:(ee,m,p)=>{p.r(m),p.d(m,{ArticulosProductorComponent:()=>Z});var a=p(2615),g=p(2200),l=p(4341),f=p(6176),_=p(9675),h=p(6562),e=p(3664),b=p(4965);let v=(()=>{class r{validateFile(t,o={}){if(!t)return{valid:!1,error:"empty"};const{maxSizeMb:n,allowedMimeTypes:i}=o;return"number"==typeof n&&t.size>1024*n*1024?{valid:!1,error:"size"}:i&&i.length>0&&!i.includes(t.type)?{valid:!1,error:"type"}:{valid:!0}}buildErrorMessage(t,o){return t.valid||!t.error?null:"size"===t.error&&"number"==typeof o.maxSizeMb?`El archivo no puede superar los ${o.maxSizeMb}MB`:"type"===t.error&&o.allowedMimeTypes&&o.allowedMimeTypes.length>0?`Solo se permiten archivos: ${o.allowedMimeTypes.map(i=>i.split("/")[1]?.toUpperCase()??i).join(", ")}`:"empty"===t.error?"Selecciona un archivo":"Archivo inv\xe1lido"}formatFileSize(t){if(!Number.isFinite(t)||t<=0)return"0 KB";const o=["Bytes","KB","MB","GB","TB"];let n=t,i=0;for(;n>=1024&&i<o.length-1;)n/=1024,i+=1;return`${n.toFixed(0===i?0:1)} ${o[i]}`}static \u0275fac=function(o){return new(o||r)};static \u0275prov=a.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function x(r,c){if(1&r&&(e.j41(0,"div",11),e.nrm(1,"img",12),e.j41(2,"div",13),e.nrm(3,"i",14),e.j41(4,"p"),e.EFF(5,"Click para cambiar imagen"),e.k0s()()()),2&r){const t=e.XpG();e.R7$(),e.Y8G("src",t.currentImageUrl,e.B4B)("alt","Imagen actual")}}function C(r,c){if(1&r){const t=e.RV6();e.j41(0,"div",15),e.nrm(1,"img",12),e.j41(2,"div",16)(3,"p",17),e.EFF(4),e.k0s(),e.j41(5,"p",18),e.EFF(6),e.k0s()(),e.j41(7,"button",19),e.bIt("click",function(n){a.eBV(t);const i=e.XpG();return a.Njj(i.removeFile(n))}),e.nrm(8,"i",20),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(),e.Y8G("src",t.previewUrl,e.B4B)("alt",t.selectedFile.name),e.R7$(3),e.JRh(t.selectedFile.name),e.R7$(2),e.JRh(t.formatFileSize(t.selectedFile.size))}}function P(r,c){1&r&&(e.j41(0,"div",21),e.nrm(1,"i",22),e.j41(2,"h5"),e.EFF(3,"Subir Imagen"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Arrastra una imagen aqu\xed o click para seleccionar"),e.k0s(),e.j41(6,"small",23),e.EFF(7,"JPG, PNG, GIF, WEBP - M\xe1ximo 10MB"),e.k0s()())}function M(r,c){1&r&&(e.j41(0,"div",24)(1,"div",25)(2,"span",26),e.EFF(3,"Subiendo..."),e.k0s()(),e.j41(4,"p",27),e.EFF(5,"Subiendo imagen..."),e.k0s()())}function k(r,c){if(1&r&&(e.j41(0,"div",30),e.nrm(1,"i",31),e.EFF(2),e.k0s()),2&r){const t=c.$implicit;e.R7$(2),e.SpI(" ",t," ")}}function O(r,c){if(1&r&&(e.j41(0,"div",28),e.DNE(1,k,3,1,"div",29),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.errorMessages)}}function F(r,c){if(1&r&&(e.j41(0,"div",32),e.nrm(1,"i",33),e.EFF(2),e.k0s()),2&r){const t=e.XpG();e.R7$(2),e.SpI(" ",t.successMessage," ")}}function y(r,c){if(1&r){const t=e.RV6();e.j41(0,"div",34)(1,"button",35),e.bIt("click",function(){a.eBV(t);const n=e.XpG();return a.Njj(n.uploadFile())}),e.nrm(2,"i",36),e.EFF(3," Subir Imagen "),e.k0s(),e.j41(4,"button",37),e.bIt("click",function(){a.eBV(t);const n=e.XpG();return a.Njj(n.cancelUpload())}),e.nrm(5,"i",20),e.EFF(6," Cancelar "),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.hasError)}}let w=(()=>{class r{imagenService=(0,a.WQX)(b.D);userStore=(0,a.WQX)(_.w);utils=(0,a.WQX)(v);currentImageUrl;uploadType="articulo";placeholder="Subir imagen";maxSizeMb=10;allowedMimeTypes=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];imageUploaded=new e.bkB;imageRemoved=new e.bkB;selectedFile=null;previewUrl=null;errorMessages=[];successMessage="";isUploading=!1;isDragOver=!1;get hasError(){return this.errorMessages.length>0}onFileSelected(t){const o=t.target.files[0];o&&this.processFile(o)}onDragOver(t){t.preventDefault(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),this.isDragOver=!1}onDrop(t){t.preventDefault(),this.isDragOver=!1;const o=t.dataTransfer?.files;o&&o.length>0&&this.processFile(o[0])}processFile(t){this.clearMessages();const o={maxSizeMb:this.maxSizeMb,allowedMimeTypes:this.allowedMimeTypes},n=this.utils.validateFile(t,o);if(!n.valid){const s=this.utils.buildErrorMessage(n,o)??"Archivo inv\xe1lido";return void(this.errorMessages=[s])}this.selectedFile=t;const i=new FileReader;i.onload=s=>{this.previewUrl=s.target?.result},i.readAsDataURL(t)}uploadFile(){if(!this.selectedFile)return;const t=this.userStore.snapshot();t?(this.isUploading=!0,this.clearMessages(),("articulo"===this.uploadType?this.imagenService.subirImagenArticulo(this.selectedFile,t.idUsuario,t.tipoUsuario):this.imagenService.subirImagenCategoria(this.selectedFile,t.idUsuario,t.tipoUsuario)).subscribe({next:n=>{this.isUploading=!1,n.success?(this.successMessage=n.message,this.imageUploaded.emit(n.imageUrl),this.currentImageUrl=n.imageUrl,this.selectedFile=null,this.previewUrl=null):this.errorMessages=[n.message]},error:n=>{this.isUploading=!1,this.errorMessages=[n.error?.message||"Error al subir la imagen"]}})):this.errorMessages=["No hay usuario autenticado"]}removeFile(t){t.stopPropagation(),this.selectedFile=null,this.previewUrl=null,this.clearMessages()}cancelUpload(){this.selectedFile=null,this.previewUrl=null,this.clearMessages()}removeCurrentImage(){this.currentImageUrl&&this.imagenService.eliminarImagen(this.currentImageUrl).subscribe({next:()=>{this.currentImageUrl=void 0,this.imageRemoved.emit(),this.successMessage="Imagen eliminada correctamente"},error:t=>{this.errorMessages=[t.error?.message||"Error al eliminar la imagen"]}})}formatFileSize(t){return this.utils.formatFileSize(t)}clearMessages(){this.errorMessages=[],this.successMessage=""}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=e.VBU({type:r,selectors:[["app-image-upload-panel"]],inputs:{currentImageUrl:"currentImageUrl",uploadType:"uploadType",placeholder:"placeholder",maxSizeMb:"maxSizeMb",allowedMimeTypes:"allowedMimeTypes"},outputs:{imageUploaded:"imageUploaded",imageRemoved:"imageRemoved"},decls:11,vars:11,consts:[["fileInput",""],[1,"image-upload-container"],[1,"upload-zone",3,"click","dragover","dragleave","drop"],["class","current-image",4,"ngIf"],["class","preview-container",4,"ngIf"],["class","upload-prompt",4,"ngIf"],["class","upload-loading",4,"ngIf"],["type","file","accept","image/*",2,"display","none",3,"change"],["class","error-messages mt-2",4,"ngIf"],["class","alert alert-success alert-sm mt-2",4,"ngIf"],["class","action-buttons mt-3",4,"ngIf"],[1,"current-image"],[1,"preview-img",3,"src","alt"],[1,"overlay"],[1,"fas","fa-camera"],[1,"preview-container"],[1,"file-info"],[1,"file-name"],[1,"file-size"],["type","button","title","Quitar imagen",1,"btn","btn-sm","btn-outline-danger","remove-btn",3,"click"],[1,"fas","fa-times"],[1,"upload-prompt"],[1,"fas","fa-cloud-upload-alt","upload-icon"],[1,"text-muted"],[1,"upload-loading"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"error-messages","mt-2"],["class","alert alert-danger alert-sm",4,"ngFor","ngForOf"],[1,"alert","alert-danger","alert-sm"],[1,"fas","fa-exclamation-triangle"],[1,"alert","alert-success","alert-sm","mt-2"],[1,"fas","fa-check-circle"],[1,"action-buttons","mt-3"],["type","button",1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"fas","fa-upload"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(o,n){if(1&o){const i=e.RV6();e.j41(0,"div",1)(1,"div",2),e.bIt("click",function(){a.eBV(i);const u=e.sdS(7);return a.Njj(u.click())})("dragover",function(u){return a.eBV(i),a.Njj(n.onDragOver(u))})("dragleave",function(u){return a.eBV(i),a.Njj(n.onDragLeave(u))})("drop",function(u){return a.eBV(i),a.Njj(n.onDrop(u))}),e.DNE(2,x,6,2,"div",3)(3,C,9,4,"div",4)(4,P,8,0,"div",5)(5,M,6,0,"div",6),e.k0s(),e.j41(6,"input",7,0),e.bIt("change",function(u){return a.eBV(i),a.Njj(n.onFileSelected(u))}),e.k0s(),e.DNE(8,O,2,1,"div",8)(9,F,3,1,"div",9)(10,y,7,1,"div",10),e.k0s()}2&o&&(e.R7$(),e.AVh("drag-over",n.isDragOver)("has-error",n.hasError),e.R7$(),e.Y8G("ngIf",n.currentImageUrl&&!n.selectedFile),e.R7$(),e.Y8G("ngIf",n.selectedFile&&n.previewUrl),e.R7$(),e.Y8G("ngIf",!n.currentImageUrl&&!n.selectedFile),e.R7$(),e.Y8G("ngIf",n.isUploading),e.R7$(3),e.Y8G("ngIf",n.errorMessages.length>0),e.R7$(),e.Y8G("ngIf",n.successMessage),e.R7$(),e.Y8G("ngIf",n.selectedFile&&!n.isUploading))},dependencies:[g.MD,g.Sq,g.bT],styles:[".image-upload-container[_ngcontent-%COMP%]{width:100%}.upload-zone[_ngcontent-%COMP%]{border:2px dashed #dee2e6;border-radius:8px;padding:20px;text-align:center;cursor:pointer;transition:all .3s ease;position:relative;min-height:200px;display:flex;align-items:center;justify-content:center}.upload-zone[_ngcontent-%COMP%]:hover{border-color:#28a745;background-color:#f8f9fa}.upload-zone.drag-over[_ngcontent-%COMP%]{border-color:#28a745;background-color:#e8f5e8}.upload-zone.has-error[_ngcontent-%COMP%]{border-color:#dc3545}.current-image[_ngcontent-%COMP%], .preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:300px;margin:0 auto}.preview-img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:8px;box-shadow:0 2px 8px #0000001a}.current-image[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;opacity:0;transition:opacity .3s ease}.current-image[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px}.file-info[_ngcontent-%COMP%]{margin-top:10px;text-align:center}.file-name[_ngcontent-%COMP%]{font-weight:500;margin-bottom:5px;word-break:break-all}.file-size[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;margin:0}.remove-btn[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-10px;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center;background:#fff;border:2px solid #dc3545}.upload-prompt[_ngcontent-%COMP%]{color:#6c757d}.upload-icon[_ngcontent-%COMP%]{font-size:3rem;color:#28a745;margin-bottom:15px}.upload-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.error-messages[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:8px 12px;margin-bottom:5px;font-size:.9rem}.alert-sm[_ngcontent-%COMP%]{padding:8px 12px;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{text-align:center}@media (max-width: 576px){.upload-zone[_ngcontent-%COMP%]{padding:15px;min-height:150px}.preview-img[_ngcontent-%COMP%]{height:150px}.upload-icon[_ngcontent-%COMP%]{font-size:2rem}}"]})}return r})();function j(r,c){if(1&r){const t=e.RV6();e.j41(0,"button",11),e.bIt("click",function(){a.eBV(t);const n=e.XpG();return a.Njj(n.showNewForm())}),e.nrm(1,"i",12),e.EFF(2," Nuevo Producto "),e.k0s()}}function I(r,c){1&r&&(e.j41(0,"span"),e.EFF(1,"El nombre es obligatorio"),e.k0s())}function E(r,c){1&r&&(e.j41(0,"span"),e.EFF(1,"El nombre debe tener al menos 2 caracteres"),e.k0s())}function U(r,c){if(1&r&&(e.j41(0,"div",42),e.DNE(1,I,2,0,"span",43)(2,E,2,0,"span",43),e.k0s()),2&r){let t,o;const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(t=n.form.get("nombre"))||null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",null==(o=n.form.get("nombre"))||null==o.errors?null:o.errors.minlength)}}function T(r,c){1&r&&(e.j41(0,"span"),e.EFF(1,"La descripci\xf3n es obligatoria"),e.k0s())}function R(r,c){1&r&&(e.j41(0,"span"),e.EFF(1,"La descripci\xf3n debe tener al menos 10 caracteres"),e.k0s())}function A(r,c){if(1&r&&(e.j41(0,"div",42),e.DNE(1,T,2,0,"span",43)(2,R,2,0,"span",43),e.k0s()),2&r){let t,o;const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(t=n.form.get("descripcion"))||null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",null==(o=n.form.get("descripcion"))||null==o.errors?null:o.errors.minlength)}}function N(r,c){1&r&&(e.j41(0,"span"),e.EFF(1,"El precio es obligatorio"),e.k0s())}function S(r,c){1&r&&(e.j41(0,"span"),e.EFF(1,"El precio debe ser mayor que 0"),e.k0s())}function G(r,c){if(1&r&&(e.j41(0,"div",42),e.DNE(1,N,2,0,"span",43)(2,S,2,0,"span",43),e.k0s()),2&r){let t,o;const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(t=n.form.get("precio"))||null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",null==(o=n.form.get("precio"))||null==o.errors?null:o.errors.min)}}function $(r,c){1&r&&(e.j41(0,"span"),e.EFF(1,"El stock es obligatorio"),e.k0s())}function z(r,c){1&r&&(e.j41(0,"span"),e.EFF(1,"El stock no puede ser negativo"),e.k0s())}function D(r,c){if(1&r&&(e.j41(0,"div",42),e.DNE(1,$,2,0,"span",43)(2,z,2,0,"span",43),e.k0s()),2&r){let t,o;const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(t=n.form.get("stock"))||null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",null==(o=n.form.get("stock"))||null==o.errors?null:o.errors.min)}}function B(r,c){if(1&r&&(e.j41(0,"option",44),e.EFF(1),e.k0s()),2&r){const t=c.$implicit;e.Y8G("value",t.idCategoria),e.R7$(),e.SpI(" ",t.nombre," ")}}function V(r,c){1&r&&(e.j41(0,"span"),e.EFF(1," Selecciona una categor\xeda "),e.k0s())}function Y(r,c){if(1&r&&(e.j41(0,"div",42),e.DNE(1,V,2,0,"span",43),e.k0s()),2&r){let t;const o=e.XpG(2);e.R7$(),e.Y8G("ngIf",(null==(t=o.form.get("idCategoria"))||null==t.errors?null:t.errors.required)||(null==(t=o.form.get("idCategoria"))||null==t.errors?null:t.errors.min))}}function X(r,c){1&r&&e.nrm(0,"i",45)}function q(r,c){1&r&&e.nrm(0,"div",46)}function J(r,c){if(1&r){const t=e.RV6();e.j41(0,"div",13)(1,"div",14)(2,"div",15)(3,"h2"),e.EFF(4),e.k0s(),e.j41(5,"button",16),e.bIt("click",function(){a.eBV(t);const n=e.XpG();return a.Njj(n.cancelForm())}),e.nrm(6,"i",17),e.k0s()(),e.j41(7,"form",18),e.bIt("ngSubmit",function(){a.eBV(t);const n=e.XpG();return a.Njj(n.onSubmit())}),e.j41(8,"div",19)(9,"h3"),e.EFF(10,"Imagen del Producto"),e.k0s(),e.j41(11,"app-image-upload-panel",20,1),e.bIt("imageUploaded",function(n){a.eBV(t);const i=e.XpG();return a.Njj(i.onImageUploaded(n))})("imageRemoved",function(){a.eBV(t);const n=e.XpG();return a.Njj(n.onImageRemoved())}),e.k0s()(),e.j41(13,"div",19)(14,"h3"),e.EFF(15,"Informaci\xf3n del Producto"),e.k0s(),e.j41(16,"div",21)(17,"div",22)(18,"label",23),e.EFF(19,"Nombre del Producto *"),e.k0s(),e.nrm(20,"input",24),e.DNE(21,U,3,2,"div",25),e.k0s()(),e.j41(22,"div",21)(23,"div",22)(24,"label",26),e.EFF(25,"Descripci\xf3n *"),e.k0s(),e.nrm(26,"textarea",27),e.DNE(27,A,3,2,"div",25),e.k0s()(),e.j41(28,"div",28)(29,"div",22)(30,"label",29),e.EFF(31,"Precio (\u20ac) *"),e.k0s(),e.nrm(32,"input",30),e.DNE(33,G,3,2,"div",25),e.k0s(),e.j41(34,"div",22)(35,"label",31),e.EFF(36,"Stock Disponible *"),e.k0s(),e.nrm(37,"input",32),e.DNE(38,D,3,2,"div",25),e.k0s()(),e.j41(39,"div",21)(40,"div",22)(41,"label",33),e.EFF(42,"Categor\xeda *"),e.k0s(),e.j41(43,"select",34)(44,"option",35),e.EFF(45,"Selecciona una categor\xeda"),e.k0s(),e.DNE(46,B,2,2,"option",36),e.k0s(),e.DNE(47,Y,2,1,"div",25),e.k0s()()(),e.j41(48,"div",37)(49,"button",38),e.bIt("click",function(){a.eBV(t);const n=e.XpG();return a.Njj(n.cancelForm())}),e.EFF(50," Cancelar "),e.k0s(),e.j41(51,"button",39),e.DNE(52,X,1,0,"i",40)(53,q,1,0,"div",41),e.EFF(54),e.k0s()()()()()}if(2&r){let t,o,n,i,s;const u=e.sdS(12),d=e.XpG();e.R7$(4),e.JRh(d.editingArticulo?"Editar Producto":"Nuevo Producto"),e.R7$(3),e.Y8G("formGroup",d.form),e.R7$(4),e.Y8G("currentImageUrl",d.imagePreview||d.form.value.imagenUrl||void 0),e.R7$(10),e.Y8G("ngIf",(null==(t=d.form.get("nombre"))?null:t.touched)&&(null==(t=d.form.get("nombre"))?null:t.errors)),e.R7$(6),e.Y8G("ngIf",(null==(o=d.form.get("descripcion"))?null:o.touched)&&(null==(o=d.form.get("descripcion"))?null:o.errors)),e.R7$(6),e.Y8G("ngIf",(null==(n=d.form.get("precio"))?null:n.touched)&&(null==(n=d.form.get("precio"))?null:n.errors)),e.R7$(5),e.Y8G("ngIf",(null==(i=d.form.get("stock"))?null:i.touched)&&(null==(i=d.form.get("stock"))?null:i.errors)),e.R7$(8),e.Y8G("ngForOf",d.categorias),e.R7$(),e.Y8G("ngIf",(null==(s=d.form.get("idCategoria"))?null:s.touched)&&(null==(s=d.form.get("idCategoria"))?null:s.errors)),e.R7$(4),e.Y8G("disabled",d.form.invalid||d.saving||(null==u?null:u.isUploading)),e.R7$(),e.Y8G("ngIf",!d.saving),e.R7$(),e.Y8G("ngIf",d.saving),e.R7$(),e.SpI(" ",d.saving?"Guardando...":d.editingArticulo?"Actualizar":"Crear Producto"," ")}}function Q(r,c){if(1&r){const t=e.RV6();e.j41(0,"div",51)(1,"div",52),e.nrm(2,"img",53),e.j41(3,"div",54),e.EFF(4),e.k0s()(),e.j41(5,"div",55)(6,"div",56)(7,"h3"),e.EFF(8),e.k0s(),e.j41(9,"div",57),e.EFF(10),e.nI1(11,"currency"),e.k0s()(),e.j41(12,"p",58),e.EFF(13),e.k0s(),e.j41(14,"div",59)(15,"span",60),e.EFF(16),e.k0s(),e.j41(17,"span",61),e.nrm(18,"i",62),e.EFF(19),e.k0s()()(),e.j41(20,"div",63)(21,"button",64),e.bIt("click",function(){const n=a.eBV(t).$implicit,i=e.XpG(3);return a.Njj(i.editArticulo(n))}),e.nrm(22,"i",65),e.k0s(),e.j41(23,"button",66),e.bIt("click",function(){const n=a.eBV(t).$implicit,i=e.XpG(3);return a.Njj(i.deleteArticulo(n))}),e.nrm(24,"i",67),e.k0s()()()}if(2&r){const t=c.$implicit;e.R7$(2),e.Y8G("src",t.imagenUrl||"/images/default-product.png",e.B4B)("alt",t.nombre),e.R7$(),e.AVh("low-stock",t.stock<10)("out-of-stock",0===t.stock),e.R7$(),e.SpI(" Stock: ",t.stock," "),e.R7$(4),e.JRh(t.nombre),e.R7$(2),e.JRh(e.ii3(11,16,t.precio,"EUR","symbol","1.2-2")),e.R7$(3),e.JRh(t.descripcion),e.R7$(3),e.JRh(t.nombreCategoria),e.R7$(),e.AVh("warning",t.stock<10)("danger",0===t.stock),e.R7$(2),e.SpI(" ",t.stock," unidades ")}}function W(r,c){if(1&r&&(e.j41(0,"div",49),e.DNE(1,Q,25,21,"div",50),e.k0s()),2&r){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.articulos)}}function L(r,c){if(1&r){const t=e.RV6();e.j41(0,"div",68)(1,"div",69),e.nrm(2,"i",70),e.k0s(),e.j41(3,"h3"),e.EFF(4,"No tienes productos"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Empieza a\xf1adiendo tu primer producto al cat\xe1logo."),e.k0s(),e.j41(7,"button",11),e.bIt("click",function(){a.eBV(t);const n=e.XpG(2);return a.Njj(n.showNewForm())}),e.nrm(8,"i",12),e.EFF(9," Crear Primer Producto "),e.k0s()()}}function H(r,c){if(1&r&&(e.j41(0,"div",47),e.DNE(1,W,2,1,"div",48)(2,L,10,0,"ng-template",null,2,e.C5r),e.k0s()),2&r){const t=e.sdS(3),o=e.XpG();e.R7$(),e.Y8G("ngIf",o.articulos.length>0)("ngIfElse",t)}}function K(r,c){1&r&&(e.j41(0,"div",71),e.nrm(1,"div",72),e.j41(2,"p"),e.EFF(3,"Cargando productos..."),e.k0s()())}let Z=(()=>{class r{fb=(0,a.WQX)(l.ok);userStore=(0,a.WQX)(_.w);productorService=(0,a.WQX)(h.o);router=(0,a.WQX)(f.Ix);route=(0,a.WQX)(f.nX);productor=null;articulos=[];categorias=[];loading=!0;showForm=!1;editingArticulo=null;saving=!1;imagePreview=null;currentUser=this.userStore.snapshot();form=this.fb.nonNullable.group({nombre:["",[l.k0.required,l.k0.minLength(2)]],descripcion:["",[l.k0.required,l.k0.minLength(10)]],precio:[0,[l.k0.required,l.k0.min(.01)]],stock:[0,[l.k0.required,l.k0.min(0)]],idCategoria:[0,[l.k0.required,l.k0.min(1)]],imagenUrl:[""]});clearAuthSession(){sessionStorage.removeItem("authToken"),this.userStore.clear(),this.router.navigateByUrl("/login/productores")}ngOnInit(){if(this.currentUser=this.userStore.snapshot(),!this.currentUser){const o=sessionStorage.getItem("authToken");if(!o)return console.error("No user found and no token in sessionStorage"),void this.router.navigateByUrl("/login/productores");try{const n=JSON.parse(atob(o.split(".")[1]));return console.log("Token payload:",n),alert("Error: Sesi\xf3n inconsistente. Por favor, inicie sesi\xf3n nuevamente."),void this.router.navigateByUrl("/login/productores")}catch(n){return console.error("Error decoding token:",n),void this.router.navigateByUrl("/login/productores")}}if("PRODUCTOR"!==this.currentUser.tipoUsuario)return console.error("User is not a producer:",this.currentUser),void this.router.navigateByUrl("/login/productores");console.log("Current user validated:",this.currentUser),console.log("User properties:",Object.keys(this.currentUser)),console.log("User ID field value:",this.currentUser.idUsuario),this.route.snapshot.url.some(o=>"nuevo"===o.path)&&(this.showForm=!0),this.loadData()}loadData(){if(this.currentUser=this.userStore.snapshot(),!this.currentUser)return console.error("No current user found in store"),alert("Error: No se ha iniciado sesi\xf3n correctamente"),void this.router.navigateByUrl("/login/productores");if(!this.currentUser.idUsuario)return console.error("Current user has no ID:",this.currentUser),alert("Error: El usuario no tiene un ID v\xe1lido"),void this.router.navigateByUrl("/login/productores");console.log("Loading data for user:",this.currentUser);const t=sessionStorage.getItem("authToken");if(console.log("Token in sessionStorage:",t?t.substring(0,50)+"...":"null"),!t)return console.error("No token found in sessionStorage"),alert("Error: No se encontr\xf3 token de autenticaci\xf3n. Por favor, inicie sesi\xf3n nuevamente."),void this.router.navigateByUrl("/login/productores");try{const o=JSON.parse(atob(t.split(".")[1])),n=Math.floor(Date.now()/1e3);if(console.log("Token payload:",o),console.log("Token exp:",o.exp,"Current time:",n),o.exp&&o.exp<n)return console.error("Token has expired"),alert("Su sesi\xf3n ha expirado. Por favor, inicie sesi\xf3n nuevamente."),void console.warn("\u{1f6a8} Token expired - but NOT clearing session for debugging")}catch(o){return console.error("Error decoding token:",o),alert("Token inv\xe1lido. Por favor, inicie sesi\xf3n nuevamente."),void console.warn("\u{1f6a8} Invalid token - but NOT clearing session for debugging")}console.log("Attempting to load productor for user ID:",this.currentUser.idUsuario),this.productorService.getProductorPorUsuario(this.currentUser.idUsuario).subscribe({next:o=>{console.log("Productor loaded:",o),this.productor=o,this.loadArticulos()},error:o=>{console.error("Error loading productor:",o),console.log("Error details:",{status:o.status,statusText:o.statusText,message:o.message,url:o.url}),this.loading=!1;let n="Error al cargar la informaci\xf3n del productor. ";401===o.status?(n+="Su sesi\xf3n ha expirado o no tiene permisos. Por favor, inicie sesi\xf3n nuevamente.",console.warn("\u{1f6a8} 401 error detected - but NOT clearing session for debugging")):n+=404===o.status?"No se encontr\xf3 informaci\xf3n de productor para este usuario.":0===o.status?"No se pudo conectar con el servidor. Verifique su conexi\xf3n a internet.":`Error del servidor (${o.status}). Int\xe9ntelo de nuevo m\xe1s tarde.`,alert(n)}}),this.productorService.getCategorias().subscribe({next:o=>{console.log("Categorias loaded:",o),this.categorias=o},error:o=>{console.error("Error loading categorias:",o),alert("Error al cargar las categor\xedas")}})}loadArticulos(){this.productor&&this.productorService.getArticulosProductor(this.productor.idProductor).subscribe({next:t=>{this.articulos=t,this.loading=!1},error:()=>{this.loading=!1}})}showNewForm(){this.editingArticulo=null,this.form.reset({nombre:"",descripcion:"",precio:0,stock:0,idCategoria:0,imagenUrl:""}),Object.keys(this.form.controls).forEach(t=>{this.form.get(t)?.markAsUntouched(),this.form.get(t)?.markAsPristine()}),this.imagePreview=null,this.showForm=!0,console.log("New form initialized:",this.form.value)}editArticulo(t){this.editingArticulo=t,this.form.patchValue({nombre:t.nombre,descripcion:t.descripcion,precio:t.precio,stock:t.stock,idCategoria:t.idCategoria||0,imagenUrl:t.imagenUrl}),this.imagePreview=t.imagenUrl,this.showForm=!0}cancelForm(){this.showForm=!1,this.editingArticulo=null,this.form.reset(),this.imagePreview=null,this.route.snapshot.url.some(t=>"nuevo"===t.path)&&this.router.navigateByUrl("/productor/articulos")}onImageUploaded(t){this.form.patchValue({imagenUrl:t}),this.imagePreview=t}onImageRemoved(){this.form.patchValue({imagenUrl:""}),this.imagePreview=null}onSubmit(){if(!this.productor)return console.error("No se encontr\xf3 informaci\xf3n del productor"),void alert("Error: No se encontr\xf3 informaci\xf3n del productor");if(this.form.invalid)return console.error("Form is invalid:",{formErrors:this.form.errors,formValue:this.form.value,controls:Object.keys(this.form.controls).map(i=>({key:i,errors:this.form.get(i)?.errors,value:this.form.get(i)?.value}))}),Object.keys(this.form.controls).forEach(i=>{this.form.get(i)?.markAsTouched()}),void alert("Por favor, completa todos los campos obligatorios correctamente");this.saving=!0;const t=this.form.getRawValue(),o={nombre:t.nombre.trim(),descripcion:t.descripcion.trim(),precio:Number(t.precio),stock:Number(t.stock),idCategoria:Number(t.idCategoria),idProductor:this.productor.idProductor,imagenUrl:t.imagenUrl||""};console.log("Sending request to create/update articulo:",o),(this.editingArticulo?this.productorService.updateArticulo(this.productor.idProductor,this.editingArticulo.idArticulo,o):this.productorService.createArticulo(this.productor.idProductor,o)).subscribe({next:i=>{console.log("Articulo saved successfully:",i),this.loadArticulos(),this.cancelForm(),this.saving=!1,alert(this.editingArticulo?"Producto actualizado correctamente":"Producto creado correctamente")},error:i=>{console.error("Error saving articulo:",i);let s="Error al guardar el producto. ";s+=400===i.status?"Verifique que todos los campos est\xe9n completos y sean v\xe1lidos.":401===i.status?"No tiene permisos para realizar esta operaci\xf3n.":404===i.status?"No se encontr\xf3 el recurso solicitado.":500===i.status?"Error interno del servidor.":i.error?.message?i.error.message:"Int\xe9ntalo de nuevo.",alert(s),this.saving=!1}})}deleteArticulo(t){if(confirm(`\xbfEst\xe1s seguro de que quieres eliminar el producto "${t.nombre}"?`)){if(!this.productor)return void alert("Error: No se encontr\xf3 informaci\xf3n del productor");this.productorService.deleteArticulo(this.productor.idProductor,t.idArticulo).subscribe({next:()=>{this.loadArticulos(),alert("Producto eliminado correctamente")},error:o=>{console.error("Error deleting articulo:",o),alert("Error al eliminar el producto. Int\xe9ntalo de nuevo.")}})}}goBack(){this.router.navigateByUrl("/productor/dashboard")}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=e.VBU({type:r,selectors:[["app-articulos-productor"]],decls:13,vars:4,consts:[["loadingTemplate",""],["imageUploader",""],["noArticulos",""],[1,"articulos-container"],[1,"articulos-header"],[1,"btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"header-content"],["class","btn btn--primary",3,"click",4,"ngIf"],["class","form-container",4,"ngIf"],["class","articulos-content",4,"ngIf","ngIfElse"],[1,"btn","btn--primary",3,"click"],[1,"fas","fa-plus"],[1,"form-container"],[1,"form-card"],[1,"form-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"articulo-form",3,"ngSubmit","formGroup"],[1,"form-section"],["uploadType","articulo",3,"imageUploaded","imageRemoved","currentImageUrl"],[1,"form-row"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre","placeholder","Ej: Tomates Cherry Ecol\xf3gicos",1,"form-control"],["class","field-error",4,"ngIf"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","4","placeholder","Describe tu producto: caracter\xedsticas, origen, m\xe9todo de cultivo...",1,"form-control"],[1,"form-row","form-row--split"],["for","precio"],["type","number","id","precio","formControlName","precio","step","0.01","min","0","placeholder","0.00",1,"form-control"],["for","stock"],["type","number","id","stock","formControlName","stock","min","0","placeholder","0",1,"form-control"],["for","idCategoria"],["id","idCategoria","formControlName","idCategoria",1,"form-control"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"form-actions"],["type","button",1,"btn","btn--outline",3,"click"],["type","submit",1,"btn","btn--primary",3,"disabled"],["class","fas fa-save",4,"ngIf"],["class","button-spinner",4,"ngIf"],[1,"field-error"],[4,"ngIf"],[3,"value"],[1,"fas","fa-save"],[1,"button-spinner"],[1,"articulos-content"],["class","articulos-grid",4,"ngIf","ngIfElse"],[1,"articulos-grid"],["class","articulo-card",4,"ngFor","ngForOf"],[1,"articulo-card"],[1,"articulo-image"],[3,"src","alt"],[1,"stock-badge"],[1,"articulo-content"],[1,"articulo-header"],[1,"precio"],[1,"descripcion"],[1,"articulo-meta"],[1,"categoria"],[1,"stock-info"],[1,"fas","fa-boxes"],[1,"articulo-actions"],["title","Editar producto",1,"btn-action","btn-action--edit",3,"click"],[1,"fas","fa-edit"],["title","Eliminar producto",1,"btn-action","btn-action--delete",3,"click"],[1,"fas","fa-trash"],[1,"empty-state"],[1,"empty-icon"],[1,"fas","fa-box"],[1,"loading-container"],[1,"spinner"]],template:function(o,n){if(1&o){const i=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"button",5),e.bIt("click",function(){return a.eBV(i),a.Njj(n.goBack())}),e.nrm(3,"i",6),e.EFF(4," Volver al Dashboard "),e.k0s(),e.j41(5,"div",7)(6,"h1"),e.EFF(7,"Mis Productos"),e.k0s(),e.DNE(8,j,3,0,"button",8),e.k0s()(),e.DNE(9,J,55,13,"div",9)(10,H,4,2,"div",10)(11,K,4,0,"ng-template",null,0,e.C5r),e.k0s()}if(2&o){const i=e.sdS(12);e.R7$(8),e.Y8G("ngIf",!n.showForm),e.R7$(),e.Y8G("ngIf",n.showForm),e.R7$(),e.Y8G("ngIf",!n.loading)("ngIfElse",i)}},dependencies:[g.MD,g.Sq,g.bT,l.X1,l.qT,l.xH,l.y7,l.me,l.Q0,l.wz,l.BC,l.cb,l.VZ,l.j4,l.JD,w,g.oe],styles:[".articulos-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f8fafc;padding:20px}.articulos-header[_ngcontent-%COMP%]{margin-bottom:30px}.articulos-header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:none;border:none;color:#64748b;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:8px;margin-bottom:15px;padding:8px 0;transition:color .3s ease}.articulos-header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{color:#4caf50}.articulos-header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.articulos-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:20px}.articulos-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#1a202c;margin:0}.form-container[_ngcontent-%COMP%]{margin-bottom:30px}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:25px 30px;border-bottom:1px solid #e2e8f0}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a202c;margin:0}.form-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#64748b;font-size:18px;cursor:pointer;padding:8px;border-radius:50%;transition:all .3s ease}.form-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;color:#ef4444}.articulo-form[_ngcontent-%COMP%]{padding:30px}.form-section[_ngcontent-%COMP%]{margin-bottom:30px}.form-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1a202c;margin:0 0 20px;padding-bottom:8px;border-bottom:2px solid #4caf50;display:inline-block}.image-upload-container[_ngcontent-%COMP%]{display:flex;gap:30px;align-items:flex-start}@media (max-width: 768px){.image-upload-container[_ngcontent-%COMP%]{flex-direction:column;gap:20px}}.image-preview[_ngcontent-%COMP%]{position:relative;width:200px;height:200px;border-radius:12px;overflow:hidden;border:3px solid #e2e8f0;background-color:#f8fafc}.image-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-preview[_ngcontent-%COMP%]   .upload-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#000000b3;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff}.image-preview[_ngcontent-%COMP%]   .upload-overlay[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid rgba(255,255,255,.3);border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:8px}.image-preview[_ngcontent-%COMP%]   .upload-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin:0}.upload-controls[_ngcontent-%COMP%]{flex:1}.upload-controls[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}.upload-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;cursor:pointer;margin-bottom:10px;transition:opacity .3s ease}.upload-controls[_ngcontent-%COMP%]   label.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.upload-controls[_ngcontent-%COMP%]   .upload-hint[_ngcontent-%COMP%]{font-size:14px;color:#64748b;margin:0}.form-row[_ngcontent-%COMP%]{margin-bottom:20px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-row--split[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.form-row--split[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#374151;margin-bottom:8px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:16px;transition:all .3s ease;background-color:#fff}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 0 3px #4caf501a}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px;font-family:inherit}.form-group[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{cursor:pointer}.form-group[_ngcontent-%COMP%]   input[type=number].form-control[_ngcontent-%COMP%]{-moz-appearance:textfield}.form-group[_ngcontent-%COMP%]   input[type=number].form-control[_ngcontent-%COMP%]::-webkit-outer-spin-button, .form-group[_ngcontent-%COMP%]   input[type=number].form-control[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.field-error[_ngcontent-%COMP%]{margin-top:8px;font-size:14px;color:#ef4444;font-weight:500}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:flex-end;padding-top:20px;border-top:1px solid #e2e8f0;margin-top:30px}@media (max-width: 768px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}}.btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;font-weight:600;text-decoration:none;display:inline-flex;align-items:center;gap:8px;border:none;cursor:pointer;transition:all .3s ease;justify-content:center;min-width:120px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn--primary[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn--primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#45a049;transform:translateY(-1px)}.btn--outline[_ngcontent-%COMP%]{background:transparent;color:#4caf50;border:2px solid #4caf50}.btn--outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#4caf50;color:#fff}.button-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.articulos-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.articulos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:24px}.articulo-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden;transition:all .3s ease;position:relative}.articulo-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #00000026}.articulo-image[_ngcontent-%COMP%]{height:220px;overflow:hidden;position:relative}.articulo-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.articulo-card[_ngcontent-%COMP%]:hover   .articulo-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.stock-badge[_ngcontent-%COMP%]{position:absolute;top:12px;left:12px;background:#4caf50e6;color:#fff;padding:4px 8px;border-radius:6px;font-size:12px;font-weight:600;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.stock-badge.low-stock[_ngcontent-%COMP%]{background:#f59e0be6}.stock-badge.out-of-stock[_ngcontent-%COMP%]{background:#ef4444e6}.articulo-content[_ngcontent-%COMP%]{padding:20px}.articulo-content[_ngcontent-%COMP%]   .articulo-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:12px;gap:12px}.articulo-content[_ngcontent-%COMP%]   .articulo-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1a202c;margin:0;flex:1;line-height:1.3}.articulo-content[_ngcontent-%COMP%]   .articulo-header[_ngcontent-%COMP%]   .precio[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#4caf50;white-space:nowrap}.articulo-content[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]{color:#64748b;margin:0 0 16px;line-height:1.5;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.articulo-content[_ngcontent-%COMP%]   .articulo-meta[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px}.articulo-content[_ngcontent-%COMP%]   .articulo-meta[_ngcontent-%COMP%]   .categoria[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569;padding:4px 8px;border-radius:6px;font-size:12px;font-weight:500}.articulo-content[_ngcontent-%COMP%]   .articulo-meta[_ngcontent-%COMP%]   .stock-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:14px;color:#64748b}.articulo-content[_ngcontent-%COMP%]   .articulo-meta[_ngcontent-%COMP%]   .stock-info.warning[_ngcontent-%COMP%]{color:#f59e0b}.articulo-content[_ngcontent-%COMP%]   .articulo-meta[_ngcontent-%COMP%]   .stock-info.danger[_ngcontent-%COMP%]{color:#ef4444}.articulo-content[_ngcontent-%COMP%]   .articulo-meta[_ngcontent-%COMP%]   .stock-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.articulo-actions[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;display:flex;gap:6px;opacity:0;transition:opacity .3s ease}.articulo-card[_ngcontent-%COMP%]:hover   .articulo-actions[_ngcontent-%COMP%]{opacity:1}.btn-action[_ngcontent-%COMP%]{width:36px;height:36px;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.btn-action[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.btn-action--edit[_ngcontent-%COMP%]{background:#3b82f6e6;color:#fff}.btn-action--edit[_ngcontent-%COMP%]:hover{background:#3b82f6;transform:scale(1.1)}.btn-action--delete[_ngcontent-%COMP%]{background:#ef4444e6;color:#fff}.btn-action--delete[_ngcontent-%COMP%]:hover{background:#ef4444;transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 20px;background:#f8fafc;border-radius:50%;display:flex;align-items:center;justify-content:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;color:#64748b}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a202c;margin:0 0 10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0 0 30px;font-size:16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e2e8f0;border-top:3px solid #4caf50;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:16px;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.articulos-container[_ngcontent-%COMP%]{padding:15px}.articulos-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.articulos-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.articulo-form[_ngcontent-%COMP%]{padding:20px}.articulos-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.articulo-actions[_ngcontent-%COMP%]{opacity:1}}"]})}return r})()}}]);