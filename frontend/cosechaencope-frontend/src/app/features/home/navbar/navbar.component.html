<header class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm" [class.navbar--scrolled]="isScrolled">
  <div class="container">
    <!-- Logo -->
    <a class="navbar-brand d-flex align-items-center" href="/" aria-label="Ir a inicio" (click)="navigateToRoot($event)">
      <img
        src="/images/logo_test.svg"
        width="160"
        height="60"
        alt="Cosecha en Cope"
        class="navbar-logo"
      />
    </a>

    <!-- Mobile Menu Toggle -->
    <button 
      class="navbar-toggler" 
      type="button"
      (click)="toggleMenu()"
      [attr.aria-expanded]="isMenuOpen"
      aria-controls="navbarNav"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navigation Links -->
    <div class="collapse navbar-collapse" [class.show]="isMenuOpen" id="navbarNav">
      <nav class="navbar-nav mx-auto gap-3" aria-label="Navegación principal">
        <a 
          class="nav-link rounded-2" 
          href="/"
          [class.active]="isRootPath()"
          (click)="navigateToRoot($event)"
        >
          <span>Inicio</span>
        </a>
        
        <a 
          class="nav-link rounded-2" 
          routerLink="/articulos"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{exact: false}"
        >
          <span>Productos</span>
        </a>
        
        <a 
          class="nav-link rounded-2" 
          routerLink="/categorias"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{exact: false}"
        >
          <span>Categorías</span>
        </a>
        
        <a 
          class="nav-link rounded-2" 
          href="/nosotros"
          (click)="navigateExternal($event, '/nosotros')"
        >
          <span>¿Quiénes somos?</span>
        </a>
        
        <a 
          class="nav-link rounded-2" 
          href="/contacto"
          (click)="navigateExternal($event, '/contacto')"
        >
          <span>Contacto</span>
        </a>
      </nav>

      <!-- User Section -->
      <div class="navbar-nav d-flex flex-row align-items-center gap-3">
        <!-- Search Icon -->
        <a class="nav-link" href="#" (click)="$event.preventDefault()" aria-label="Buscar">
          <i class="fas fa-search fa-lg"></i>
        </a>

        <!-- User Icon -->
        <a 
          class="nav-link" 
          [routerLink]="isAuthenticated() ? getPanelRoute() : '/auth'"
          [attr.aria-label]="isAuthenticated() ? 'Mi Panel' : 'Acceder'"
        >
          <i class="fas fa-lg" [ngClass]="getButtonIcon()"></i>
        </a>

        <!-- Cart Icon -->
        <a 
          class="nav-link position-relative" 
          routerLink="/carrito"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{exact: false}"
          aria-label="Carrito"
        >
          <i class="fas fa-shopping-cart fa-lg"></i>
          @if (carritoItemCount > 0) {
            <span class="badge bg-danger rounded-pill position-absolute top-0 start-100 translate-middle" style="font-size: 0.65rem;">
              {{ carritoItemCount }}
            </span>
          }
        </a>
      </div>
    </div>
  </div>
</header>
