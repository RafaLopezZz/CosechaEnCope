"use strict";(self.webpackChunkcosecha_en_cope=self.webpackChunkcosecha_en_cope||[]).push([[679],{7679:(I,g,i)=>{i.r(g),i.d(g,{PedidosClienteComponent:()=>F});var d=i(2615),l=i(2200),_=i(6802),f=i(8132),c=i(9417),u=i(9675),C=i(8685),p=i(8234),e=i(3664);function x(t,a){if(1&t&&(e.j41(0,"option",18),e.EFF(1),e.k0s()),2&t){const n=a.$implicit;e.Y8G("value",n.value),e.R7$(),e.SpI(" ",n.label," ")}}function m(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",21)(1,"div",22)(2,"div",23)(3,"h3"),e.nrm(4,"i",24),e.EFF(5),e.k0s(),e.j41(6,"span",25),e.nrm(7,"i",26),e.EFF(8),e.nI1(9,"date"),e.k0s()(),e.j41(10,"span",27),e.nrm(11,"i",28),e.EFF(12),e.k0s()(),e.j41(13,"div",29)(14,"div",30)(15,"div",31)(16,"div",32),e.nrm(17,"i",33),e.EFF(18," Art\xedculos "),e.k0s(),e.j41(19,"div",34),e.EFF(20),e.k0s()(),e.j41(21,"div",31)(22,"div",32),e.nrm(23,"i",35),e.EFF(24," M\xe9todo de pago "),e.k0s(),e.j41(25,"div",34),e.EFF(26),e.k0s()(),e.j41(27,"div",36)(28,"div",32),e.nrm(29,"i",37),e.EFF(30," Direcci\xf3n de env\xedo "),e.k0s(),e.j41(31,"div",34),e.EFF(32),e.k0s()()(),e.j41(33,"div",38)(34,"div",39)(35,"span"),e.EFF(36,"Subtotal:"),e.k0s(),e.j41(37,"span"),e.EFF(38),e.nI1(39,"number"),e.k0s()(),e.j41(40,"div",39)(41,"span"),e.EFF(42),e.nI1(43,"number"),e.k0s(),e.j41(44,"span"),e.EFF(45),e.nI1(46,"number"),e.k0s()(),e.j41(47,"div",39)(48,"span"),e.EFF(49,"Gastos de env\xedo:"),e.k0s(),e.j41(50,"span"),e.EFF(51),e.nI1(52,"number"),e.k0s()(),e.j41(53,"div",40)(54,"span"),e.EFF(55,"Total:"),e.k0s(),e.j41(56,"strong"),e.EFF(57),e.nI1(58,"number"),e.k0s()()()(),e.j41(59,"div",41)(60,"button",42),e.bIt("click",function(){const r=d.eBV(n).$implicit,s=e.XpG(3);return d.Njj(s.verDetalle(r.idPedido))}),e.nrm(61,"i",43),e.EFF(62," Ver Detalles Completos "),e.k0s()()()}if(2&t){const n=a.$implicit,o=e.XpG(3);e.R7$(5),e.SpI(" Pedido #",n.idPedido," "),e.R7$(3),e.SpI(" ",e.i5U(9,13,n.fechaPedido,"dd/MM/yyyy HH:mm")," "),e.R7$(2),e.Y8G("ngClass",o.getEstadoClass(n.estadoPedido)),e.R7$(),e.Y8G("ngClass",o.getEstadoIcon(n.estadoPedido)),e.R7$(),e.SpI(" ",o.getEstadoLabel(n.estadoPedido)," "),e.R7$(8),e.SpI(" ",n.detalles.length," producto(s) "),e.R7$(6),e.SpI(" ",n.metodoPago," "),e.R7$(6),e.SpI(" ",n.direccionCliente," "),e.R7$(6),e.SpI("",e.i5U(39,16,n.subTotal,"1.2-2"),"\u20ac"),e.R7$(4),e.SpI("IVA (",e.i5U(43,19,n.iva/n.subTotal*100,"1.0-0"),"%):"),e.R7$(3),e.SpI("",e.i5U(46,22,n.iva,"1.2-2"),"\u20ac"),e.R7$(6),e.SpI("",e.i5U(52,25,n.gastosEnvio,"1.2-2"),"\u20ac"),e.R7$(6),e.SpI("",e.i5U(58,28,n.total,"1.2-2"),"\u20ac")}}function P(t,a){if(1&t&&(e.j41(0,"div",19),e.DNE(1,m,63,31,"div",20),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngForOf",n.pedidosFiltrados)}}function O(t,a){1&t&&(e.j41(0,"p"),e.EFF(1," No tienes pedidos con el estado seleccionado "),e.k0s())}function b(t,a){1&t&&(e.j41(0,"p"),e.EFF(1," A\xfan no has realizado ning\xfan pedido. \xa1Explora nuestros productos! "),e.k0s())}function E(t,a){1&t&&(e.j41(0,"button",48),e.nrm(1,"i",49),e.EFF(2," Explorar Productos "),e.k0s())}function M(t,a){if(1&t&&(e.j41(0,"div",44),e.nrm(1,"i",45),e.j41(2,"h3"),e.EFF(3,"No se encontraron pedidos"),e.k0s(),e.DNE(4,O,2,0,"p",46)(5,b,2,0,"p",46)(6,E,3,0,"button",47),e.k0s()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngIf","TODOS"!==n.filtroEstado),e.R7$(),e.Y8G("ngIf","TODOS"===n.filtroEstado),e.R7$(),e.Y8G("ngIf","TODOS"===n.filtroEstado)}}function h(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"label",11),e.nrm(4,"i",12),e.EFF(5," Filtrar por estado: "),e.k0s(),e.j41(6,"select",13),e.mxI("ngModelChange",function(r){d.eBV(n);const s=e.XpG();return e.DH7(s.filtroEstado,r)||(s.filtroEstado=r),d.Njj(r)}),e.bIt("change",function(){d.eBV(n);const r=e.XpG();return d.Njj(r.onFiltroChange())}),e.DNE(7,x,2,2,"option",14),e.k0s()(),e.j41(8,"div",15),e.nrm(9,"i",16),e.EFF(10),e.k0s()(),e.DNE(11,P,2,1,"div",17)(12,M,7,3,"ng-template",null,1,e.C5r),e.k0s()}if(2&t){const n=e.sdS(13),o=e.XpG();e.R7$(6),e.R50("ngModel",o.filtroEstado),e.R7$(),e.Y8G("ngForOf",o.estadosPedido),e.R7$(3),e.SpI(" ",o.pedidosFiltrados.length," pedido(s) encontrado(s) "),e.R7$(),e.Y8G("ngIf",o.pedidosFiltrados.length>0)("ngIfElse",n)}}function v(t,a){1&t&&(e.j41(0,"div",50),e.nrm(1,"div",51),e.j41(2,"p"),e.EFF(3,"Cargando tus pedidos..."),e.k0s()())}let F=(()=>{class t{userStore=(0,d.WQX)(u.w);pedidoService=(0,d.WQX)(C.H);router=(0,d.WQX)(_.Ix);pedidos=[];pedidosFiltrados=[];loading=!0;filtroEstado="TODOS";currentUser=this.userStore.snapshot();estadosPedido=[{value:"TODOS",label:"Todos los pedidos"},{value:p.u3.PENDIENTE,label:"Pendiente"},{value:p.u3.CONFIRMADO,label:"Confirmado"},{value:p.u3.EN_PREPARACION,label:"En Preparaci\xf3n"},{value:p.u3.ENVIADO,label:"Enviado"},{value:p.u3.ENTREGADO,label:"Entregado"},{value:p.u3.CANCELADO,label:"Cancelado"}];ngOnInit(){this.currentUser&&"CLIENTE"===this.currentUser.tipoUsuario?this.loadPedidos():this.router.navigateByUrl("/cliente/login")}loadPedidos(){this.pedidoService.getPedidosUsuario().subscribe({next:n=>{this.pedidos=n,this.aplicarFiltro(),this.loading=!1},error:n=>{console.error("Error al cargar pedidos:",n),this.loading=!1}})}aplicarFiltro(){this.pedidosFiltrados="TODOS"===this.filtroEstado?[...this.pedidos]:this.pedidos.filter(n=>n.estadoPedido===this.filtroEstado)}onFiltroChange(){this.aplicarFiltro()}getEstadoClass(n){switch(n){case"PENDIENTE":return"estado-pendiente";case"CONFIRMADO":return"estado-confirmado";case"EN_PREPARACION":return"estado-preparacion";case"ENVIADO":return"estado-enviado";case"ENTREGADO":return"estado-entregado";case"CANCELADO":return"estado-cancelado";default:return""}}getEstadoLabel(n){switch(n){case"PENDIENTE":return"Pendiente";case"CONFIRMADO":return"Confirmado";case"EN_PREPARACION":return"En Preparaci\xf3n";case"ENVIADO":return"Enviado";case"ENTREGADO":return"Entregado";case"CANCELADO":return"Cancelado";default:return n}}getEstadoIcon(n){switch(n){case"PENDIENTE":return"fa-clock";case"CONFIRMADO":return"fa-check";case"EN_PREPARACION":return"fa-box";case"ENVIADO":return"fa-truck";case"ENTREGADO":return"fa-check-circle";case"CANCELADO":return"fa-times-circle";default:return"fa-question"}}verDetalle(n){this.router.navigate(["/cliente/pedidos",n])}goBack(){this.router.navigateByUrl("/cliente/dashboard")}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=e.VBU({type:t,selectors:[["app-pedidos-cliente"]],decls:11,vars:2,consts:[["loadingTemplate",""],["noPedidos",""],[1,"pedidos-container"],[1,"pedidos-header"],[1,"btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-shopping-bag"],["class","pedidos-content",4,"ngIf","ngIfElse"],[1,"pedidos-content"],[1,"filter-bar"],[1,"filter-group"],["for","filtroEstado"],[1,"fas","fa-filter"],["id","filtroEstado",1,"filter-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"results-count"],[1,"fas","fa-list"],["class","pedidos-list",4,"ngIf","ngIfElse"],[3,"value"],[1,"pedidos-list"],["class","pedido-card",4,"ngFor","ngForOf"],[1,"pedido-card"],[1,"pedido-card__header"],[1,"pedido-info"],[1,"fas","fa-receipt"],[1,"pedido-fecha"],[1,"fas","fa-calendar"],[1,"badge",3,"ngClass"],[1,"fas",3,"ngClass"],[1,"pedido-card__body"],[1,"pedido-details"],[1,"detail-item"],[1,"detail-label"],[1,"fas","fa-box"],[1,"detail-value"],[1,"fas","fa-credit-card"],[1,"detail-item","detail-item--full"],[1,"fas","fa-map-marker-alt"],[1,"pedido-pricing"],[1,"pricing-row"],[1,"pricing-row","pricing-row--total"],[1,"pedido-card__footer"],[1,"btn","btn--primary",3,"click"],[1,"fas","fa-eye"],[1,"no-pedidos"],[1,"fas","fa-inbox"],[4,"ngIf"],["class","btn btn--primary","routerLink","/articulos",4,"ngIf"],["routerLink","/articulos",1,"btn","btn--primary"],[1,"fas","fa-store"],[1,"loading-container"],[1,"spinner"]],template:function(o,r){if(1&o){const s=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"button",4),e.bIt("click",function(){return d.eBV(s),d.Njj(r.goBack())}),e.nrm(3,"i",5),e.EFF(4," Volver "),e.k0s(),e.j41(5,"h1"),e.nrm(6,"i",6),e.EFF(7," Mis Pedidos "),e.k0s()(),e.DNE(8,h,14,5,"div",7)(9,v,4,0,"ng-template",null,0,e.C5r),e.k0s()}if(2&o){const s=e.sdS(10);e.R7$(8),e.Y8G("ngIf",!r.loading)("ngIfElse",s)}},dependencies:[l.MD,l.YU,l.Sq,l.bT,f.iI,f.Wk,c.YN,c.xH,c.y7,c.wz,c.BC,c.vS,l.QX,l.vh],styles:[".pedidos-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f5f5f5;padding:40px 20px}.pedidos-header[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 30px}.pedidos-header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:transparent;border:2px solid rgba(34,34,34,.12);color:#222222b3;padding:10px 20px;border-radius:8px;cursor:pointer;display:inline-flex;align-items:center;gap:8px;font-weight:500;transition:all .25s ease-in-out;margin-bottom:20px}.pedidos-header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background:#fff;border-color:#574b51;color:#574b51;transform:translate(-3px)}.pedidos-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#222;font-size:32px;font-weight:700;margin:0;display:flex;align-items:center;gap:12px}.pedidos-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#574b51}.pedidos-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.filter-bar[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 6px #00000012;margin-bottom:30px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#222222b3;display:flex;align-items:center;gap:8px;font-size:14px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#574b51}.filter-select[_ngcontent-%COMP%]{padding:10px 16px;border:2px solid rgba(34,34,34,.12);border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;background:#fff;transition:all .25s ease-in-out;min-width:200px}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#574b51;box-shadow:0 0 0 3px #574b511a}.results-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#2229;font-size:14px;font-weight:500}.results-count[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#574b51}.pedidos-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.pedido-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #00000012;overflow:hidden;transition:all .25s ease-in-out}.pedido-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 15px #0000001a}.pedido-card__header[_ngcontent-%COMP%]{background:#574b51;color:#fff;padding:20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.pedido-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.pedido-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;display:flex;align-items:center;gap:10px}.pedido-info[_ngcontent-%COMP%]   .pedido-fecha[_ngcontent-%COMP%]{font-size:14px;opacity:.9;display:flex;align-items:center;gap:6px}.pedido-card__body[_ngcontent-%COMP%]{padding:24px;display:grid;grid-template-columns:1fr auto;gap:30px}.pedido-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.detail-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:150px 1fr;gap:12px;align-items:start}.detail-item--full[_ngcontent-%COMP%]{grid-column:1/-1}.detail-label[_ngcontent-%COMP%]{font-size:14px;color:#222222b3;font-weight:600;display:flex;align-items:center;gap:8px}.detail-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2e8a99;width:16px}.detail-value[_ngcontent-%COMP%]{font-size:14px;color:#222;font-weight:500}.pedido-pricing[_ngcontent-%COMP%]{background:#f5f5f5;padding:20px;border-radius:8px;min-width:250px;height:fit-content}.pricing-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;font-size:14px;color:#222222b3}.pricing-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(34,34,34,.12)}.pricing-row--total[_ngcontent-%COMP%]{margin-top:8px;padding-top:12px;font-size:18px;color:#222;border-top:2px solid rgba(34,34,34,.12)!important;border-bottom:none}.pricing-row--total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#574b51;font-weight:700}.pedido-card__footer[_ngcontent-%COMP%]{padding:20px;background:#f5f5f5;border-top:1px solid rgba(34,34,34,.12);display:flex;justify-content:flex-end}.badge[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;font-size:13px;font-weight:600;text-transform:uppercase;display:inline-flex;align-items:center;gap:6px}.badge.estado-pendiente[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.badge.estado-confirmado[_ngcontent-%COMP%]{background-color:#dbeafe;color:#1e40af}.badge.estado-preparacion[_ngcontent-%COMP%]{background-color:#fce7f3;color:#9f1239}.badge.estado-enviado[_ngcontent-%COMP%]{background-color:#e0e7ff;color:#3730a3}.badge.estado-entregado[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.badge.estado-cancelado[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}.no-pedidos[_ngcontent-%COMP%]{background:#fff;padding:80px 40px;border-radius:12px;box-shadow:0 4px 6px #00000012;text-align:center}.no-pedidos[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:80px;color:#2222221f;margin-bottom:24px}.no-pedidos[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#222;margin:0 0 12px}.no-pedidos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#2229;font-size:16px;margin-bottom:24px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;font-weight:600;font-size:15px;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .25s ease-in-out;border:none;text-decoration:none}.btn--primary[_ngcontent-%COMP%]{background:#574b51;color:#fff}.btn--primary[_ngcontent-%COMP%]:hover{background:#41383d;transform:translateY(-1px);box-shadow:0 4px 6px #00000012}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(34,34,34,.12);border-top:4px solid #574b51;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#222222b3;font-size:18px;font-weight:500}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 992px){.pedido-card__body[_ngcontent-%COMP%]{grid-template-columns:1fr}.pedido-pricing[_ngcontent-%COMP%]{min-width:100%}}@media (max-width: 768px){.pedidos-container[_ngcontent-%COMP%]{padding:20px 15px}.pedidos-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:26px}.filter-bar[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px}.filter-select[_ngcontent-%COMP%]{width:100%;min-width:unset}.results-count[_ngcontent-%COMP%]{justify-content:center}.pedido-card__header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.pedido-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.detail-item[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:6px}.pedido-pricing[_ngcontent-%COMP%]{padding:16px}.no-pedidos[_ngcontent-%COMP%]{padding:60px 20px}.no-pedidos[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px}.no-pedidos[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}"]})}return t})()}}]);