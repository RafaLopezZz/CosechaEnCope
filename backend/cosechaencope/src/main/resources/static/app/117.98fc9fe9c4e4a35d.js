"use strict";(self.webpackChunkcosecha_en_cope=self.webpackChunkcosecha_en_cope||[]).push([[117],{4965:(b,f,l)=>{l.d(f,{D:()=>h});var c=l(2615),u=l(9330),a=l(5293);let h=(()=>{class s{http=(0,c.WQX)(u.Qq);subirImagenArticulo(r,t,m){const p=new FormData;return p.append("file",r),p.append("idUsuario",t.toString()),p.append("tipoUsuario",m),this.http.post(a.Sn.IMAGENES.UPLOAD_ARTICULO,p)}subirImagenCategoria(r,t,m){const p=new FormData;return p.append("file",r),p.append("idUsuario",t.toString()),p.append("tipoUsuario",m),this.http.post(a.Sn.IMAGENES.UPLOAD_CATEGORIA,p)}subirImagenPerfil(r,t,m){const p=new FormData;return p.append("file",r),p.append("idUsuario",t.toString()),p.append("tipoUsuario",m),this.http.post(a.Sn.IMAGENES.UPLOAD_PERFIL,p)}eliminarImagen(r){return this.http.delete(`${a.Sn.IMAGENES.DELETE}?imageUrl=${encodeURIComponent(r)}`)}static \u0275fac=function(t){return new(t||s)};static \u0275prov=c.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},5373:(b,f,l)=>{l.d(f,{P:()=>u});var c=l(2615);let u=(()=>{class a{DEFAULT_MAX_SIZE_MB=10;DEFAULT_MIME_TYPES=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];validateFile(s,_={}){const r=[];if(!s)return{valid:!1,errors:["Debe seleccionar un archivo"]};0===s.size&&r.push("El archivo est\xe1 vac\xedo");const t=_.maxSizeMb??this.DEFAULT_MAX_SIZE_MB;s.size>1024*t*1024&&r.push(`El archivo no puede exceder ${t}MB`);const p=_.allowedMimeTypes??this.DEFAULT_MIME_TYPES;if(!p.includes(s.type)){const P=p.map(v=>v.split("/")[1]?.toUpperCase()).join(", ");r.push(`Solo se permiten archivos: ${P}`)}return{valid:0===r.length,errors:r}}formatFileSize(s){if(!Number.isFinite(s)||s<=0)return"0 KB";const _=["Bytes","KB","MB","GB","TB"];let r=s,t=0;for(;r>=1024&&t<_.length-1;)r/=1024,t++;return`${r.toFixed(0===t?0:1)} ${_[t]}`}verificarImagenValida(s){return new Promise(_=>{const r=new Image;r.onload=()=>_(!0),r.onerror=()=>_(!1),r.src=s})}buildErrorMessage(s,_){return s.valid||!s.errors?null:s.errors.includes("size")&&"number"==typeof _.maxSizeMb?`El archivo no puede superar los ${_.maxSizeMb}MB`:s.errors.includes("type")&&_.allowedMimeTypes&&_.allowedMimeTypes.length>0?`Solo se permiten archivos: ${_.allowedMimeTypes.map(t=>t.split("/")[1]?.toUpperCase()??t).join(", ")}`:s.errors.includes("empty")?"Selecciona un archivo":"Archivo inv\xe1lido"}static \u0275fac=function(_){return new(_||a)};static \u0275prov=c.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},6117:(b,f,l)=>{l.r(f),l.d(f,{CategoriasProductorComponent:()=>$});var c=l(2615),u=l(2200),a=l(9417),h=l(6802),s=l(6562),_=l(4965),r=l(5373),t=l(3664);function m(o,g){if(1&o){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){c.eBV(e);const n=t.XpG();return c.Njj(n.showNewForm())}),t.nrm(1,"i",11),t.EFF(2," Nueva Categor\xeda "),t.k0s()}}function p(o,g){1&o&&(t.j41(0,"div",43),t.nrm(1,"div",44),t.j41(2,"p"),t.EFF(3,"Subiendo imagen..."),t.k0s()())}function P(o,g){if(1&o&&(t.j41(0,"div",40),t.nrm(1,"img",41),t.DNE(2,p,4,0,"div",42),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.Y8G("src",e.imagePreview||(null==e.editingCategoria?null:e.editingCategoria.imagenUrl),t.B4B),t.R7$(),t.Y8G("ngIf",e.uploadingImage)}}function v(o,g){1&o&&(t.j41(0,"div",45),t.nrm(1,"i",46),t.j41(2,"p"),t.EFF(3,"Vista previa de la imagen"),t.k0s()())}function O(o,g){if(1&o){const e=t.RV6();t.j41(0,"button",47),t.bIt("click",function(){c.eBV(e);const n=t.XpG(2);return c.Njj(n.removeSelectedImage())}),t.nrm(1,"i",16),t.EFF(2," Quitar imagen "),t.k0s()}}function M(o,g){if(1&o&&(t.j41(0,"p",48)(1,"strong"),t.EFF(2,"Archivo seleccionado:"),t.k0s(),t.EFF(3),t.nrm(4,"br"),t.j41(5,"small"),t.EFF(6),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(3),t.SpI(" ",e.selectedFile.name),t.R7$(3),t.SpI("Tama\xf1o: ",e.imagenUtils.formatFileSize(e.selectedFile.size))}}function E(o,g){1&o&&(t.j41(0,"p",48),t.EFF(1," Selecciona una imagen para tu categor\xeda (JPG, PNG, GIF, WEBP - m\xe1x. 10MB) "),t.k0s())}function I(o,g){1&o&&(t.j41(0,"span"),t.EFF(1,"El nombre es obligatorio"),t.k0s())}function F(o,g){1&o&&(t.j41(0,"span"),t.EFF(1,"El nombre debe tener al menos 2 caracteres"),t.k0s())}function D(o,g){if(1&o&&(t.j41(0,"div",49),t.DNE(1,I,2,0,"span",50)(2,F,2,0,"span",50),t.k0s()),2&o){let e,i;const n=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(e=n.form.get("nombre"))||null==e.errors?null:e.errors.required),t.R7$(),t.Y8G("ngIf",null==(i=n.form.get("nombre"))||null==i.errors?null:i.errors.minlength)}}function T(o,g){1&o&&(t.j41(0,"span"),t.EFF(1,"La descripci\xf3n es obligatoria"),t.k0s())}function k(o,g){1&o&&(t.j41(0,"span"),t.EFF(1,"La descripci\xf3n debe tener al menos 10 caracteres"),t.k0s())}function R(o,g){if(1&o&&(t.j41(0,"div",49),t.DNE(1,T,2,0,"span",50)(2,k,2,0,"span",50),t.k0s()),2&o){let e,i;const n=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(e=n.form.get("descripcion"))||null==e.errors?null:e.errors.required),t.R7$(),t.Y8G("ngIf",null==(i=n.form.get("descripcion"))||null==i.errors?null:i.errors.minlength)}}function w(o,g){1&o&&t.nrm(0,"i",51)}function j(o,g){1&o&&t.nrm(0,"div",52)}function y(o,g){if(1&o){const e=t.RV6();t.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"h2"),t.EFF(4),t.k0s(),t.j41(5,"button",15),t.bIt("click",function(){c.eBV(e);const n=t.XpG();return c.Njj(n.cancelForm())}),t.nrm(6,"i",16),t.k0s()(),t.j41(7,"form",17),t.bIt("ngSubmit",function(){c.eBV(e);const n=t.XpG();return c.Njj(n.onSubmit())}),t.j41(8,"div",18)(9,"h3"),t.EFF(10,"Imagen de la Categor\xeda"),t.k0s(),t.j41(11,"div",19),t.DNE(12,P,3,2,"div",20)(13,v,4,0,"div",21),t.j41(14,"div",22)(15,"input",23),t.bIt("change",function(n){c.eBV(e);const d=t.XpG();return c.Njj(d.onFileSelected(n))}),t.k0s(),t.j41(16,"label",24),t.nrm(17,"i",25),t.EFF(18),t.k0s(),t.DNE(19,O,3,0,"button",26)(20,M,7,2,"p",27)(21,E,2,0,"p",27),t.k0s()()(),t.j41(22,"div",18)(23,"div",28)(24,"div",29)(25,"label",30),t.EFF(26,"Nombre de la Categor\xeda *"),t.k0s(),t.nrm(27,"input",31),t.DNE(28,D,3,2,"div",32),t.k0s()(),t.j41(29,"div",28)(30,"div",29)(31,"label",33),t.EFF(32,"Descripci\xf3n *"),t.k0s(),t.nrm(33,"textarea",34),t.DNE(34,R,3,2,"div",32),t.k0s()()(),t.j41(35,"div",35)(36,"button",36),t.bIt("click",function(){c.eBV(e);const n=t.XpG();return c.Njj(n.cancelForm())}),t.EFF(37," Cancelar "),t.k0s(),t.j41(38,"button",37),t.DNE(39,w,1,0,"i",38)(40,j,1,0,"div",39),t.EFF(41),t.k0s()()()()()}if(2&o){let e,i;const n=t.XpG();t.R7$(4),t.JRh(n.editingCategoria?"Editar Categor\xeda":"Nueva Categor\xeda"),t.R7$(3),t.Y8G("formGroup",n.form),t.R7$(5),t.Y8G("ngIf",n.imagePreview||(null==n.editingCategoria?null:n.editingCategoria.imagenUrl)),t.R7$(),t.Y8G("ngIf",!(n.imagePreview||null!=n.editingCategoria&&n.editingCategoria.imagenUrl)),t.R7$(5),t.SpI(" ",n.selectedFile?"Cambiar imagen":"Seleccionar imagen"," "),t.R7$(),t.Y8G("ngIf",n.selectedFile||n.imagePreview),t.R7$(),t.Y8G("ngIf",n.selectedFile),t.R7$(),t.Y8G("ngIf",!n.selectedFile),t.R7$(7),t.Y8G("ngIf",(null==(e=n.form.get("nombre"))?null:e.touched)&&(null==(e=n.form.get("nombre"))?null:e.errors)),t.R7$(6),t.Y8G("ngIf",(null==(i=n.form.get("descripcion"))?null:i.touched)&&(null==(i=n.form.get("descripcion"))?null:i.errors)),t.R7$(4),t.Y8G("disabled",n.form.invalid||n.saving||n.uploadingImage),t.R7$(),t.Y8G("ngIf",!n.saving&&!n.uploadingImage),t.R7$(),t.Y8G("ngIf",n.saving||n.uploadingImage),t.R7$(),t.SpI(" ",n.saving||n.uploadingImage?"Guardando...":n.editingCategoria?"Actualizar":"Crear Categor\xeda"," ")}}function S(o,g){if(1&o){const e=t.RV6();t.j41(0,"div",57)(1,"div",58)(2,"img",59),t.bIt("error",function(n){c.eBV(e);const d=t.XpG(3);return c.Njj(d.onImageError(n))}),t.k0s()(),t.j41(3,"div",60)(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.k0s()(),t.j41(8,"div",61)(9,"button",62),t.bIt("click",function(){const n=c.eBV(e).$implicit,d=t.XpG(3);return c.Njj(d.editCategoria(n))}),t.nrm(10,"i",63),t.k0s(),t.j41(11,"button",64),t.bIt("click",function(){const n=c.eBV(e).$implicit,d=t.XpG(3);return c.Njj(d.deleteCategoria(n))}),t.nrm(12,"i",65),t.k0s()()()}if(2&o){const e=g.$implicit;t.R7$(2),t.Y8G("src",e.imagenUrl||"/images/default-category.png",t.B4B)("alt",e.nombre),t.R7$(3),t.JRh(e.nombre),t.R7$(2),t.JRh(e.descripcion)}}function U(o,g){if(1&o&&(t.j41(0,"div",55),t.DNE(1,S,13,4,"div",56),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.categorias)}}function G(o,g){if(1&o){const e=t.RV6();t.j41(0,"div",66)(1,"div",67),t.nrm(2,"i",68),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No hay categor\xedas"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Empieza creando tu primera categor\xeda de productos."),t.k0s(),t.j41(7,"button",10),t.bIt("click",function(){c.eBV(e);const n=t.XpG(2);return c.Njj(n.showNewForm())}),t.nrm(8,"i",11),t.EFF(9," Crear Primera Categor\xeda "),t.k0s()()}}function A(o,g){if(1&o&&(t.j41(0,"div",53),t.DNE(1,U,2,1,"div",54)(2,G,10,0,"ng-template",null,1,t.C5r),t.k0s()),2&o){const e=t.sdS(3),i=t.XpG();t.R7$(),t.Y8G("ngIf",i.categorias.length>0)("ngIfElse",e)}}function B(o,g){1&o&&(t.j41(0,"div",69),t.nrm(1,"div",44),t.j41(2,"p"),t.EFF(3,"Cargando categor\xedas..."),t.k0s()())}let $=(()=>{class o{fb=(0,c.WQX)(a.ok);productorService=(0,c.WQX)(s.o);imagenService=(0,c.WQX)(_.D);imagenUtils=(0,c.WQX)(r.P);router=(0,c.WQX)(h.Ix);categorias=[];loading=!0;showForm=!1;editingCategoria=null;saving=!1;selectedFile=null;uploadingImage=!1;imagePreview=null;form=this.fb.nonNullable.group({nombre:["",[a.k0.required,a.k0.minLength(2)]],descripcion:["",[a.k0.required,a.k0.minLength(10)]]});ngOnInit(){this.loadCategorias()}onFileSelected(e){const i=e.target;if(i.files&&i.files[0]){const n=i.files[0],d=this.imagenUtils.validateFile(n);if(!d.valid)return void alert(this.imagenUtils.buildErrorMessage(d,{}));this.selectedFile=n;const C=new FileReader;C.onload=x=>{this.imagePreview=x.target?.result},C.readAsDataURL(n)}}removeSelectedImage(){this.selectedFile=null,this.imagePreview=null;const e=document.getElementById("imagen");e&&(e.value="")}loadCategorias(){this.productorService.getCategorias().subscribe({next:e=>{this.categorias=e,this.loading=!1},error:()=>{this.loading=!1}})}showNewForm(){this.editingCategoria=null,this.form.reset(),this.selectedFile=null,this.imagePreview=null,this.uploadingImage=!1,this.showForm=!0}editCategoria(e){this.editingCategoria=e,this.form.patchValue({nombre:e.nombre,descripcion:e.descripcion}),e.imagenUrl&&(this.imagePreview=e.imagenUrl),this.showForm=!0}cancelForm(){this.showForm=!1,this.editingCategoria=null,this.form.reset(),this.selectedFile=null,this.imagePreview=null,this.uploadingImage=!1;const e=document.getElementById("imagen");e&&(e.value="")}onSubmit(){if(this.form.invalid)return;this.saving=!0;const e=this.form.getRawValue(),i=n=>{const d={nombre:e.nombre,descripcion:e.descripcion,imagenUrl:n||this.editingCategoria?.imagenUrl||""};(this.editingCategoria?this.productorService.updateCategoria(this.editingCategoria.idCategoria,d):this.productorService.createCategoria(d)).subscribe({next:()=>{this.loadCategorias(),this.cancelForm(),this.saving=!1,alert(this.editingCategoria?"Categor\xeda actualizada correctamente":"Categor\xeda creada correctamente")},error:x=>{console.error("Error saving categoria:",x),alert("Error al guardar la categor\xeda. Int\xe9ntalo de nuevo."),this.saving=!1}})};if(this.selectedFile){this.uploadingImage=!0;const n=localStorage.getItem("user");if(!n)return alert("Error: No se encontraron datos del usuario"),void(this.saving=!1);const d=JSON.parse(n);this.imagenService.subirImagenCategoria(this.selectedFile,d.id,d.tipoUsuario).subscribe({next:C=>{this.uploadingImage=!1,i(C.imageUrl)},error:C=>{console.error("Error uploading image:",C),this.uploadingImage=!1,this.saving=!1,alert("Error al subir la imagen. Int\xe9ntalo de nuevo.")}})}else i()}deleteCategoria(e){confirm(`\xbfEst\xe1s seguro de que quieres eliminar la categor\xeda "${e.nombre}"?`)&&this.productorService.deleteCategoria(e.idCategoria).subscribe({next:()=>{this.loadCategorias(),alert("Categor\xeda eliminada correctamente")},error:i=>{console.error("Error deleting categoria:",i),alert("Error al eliminar la categor\xeda. Puede que tenga productos asociados.")}})}goBack(){this.router.navigateByUrl("/productor/dashboard")}onImageError(e){e.target.src="/images/default-category.png"}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=t.VBU({type:o,selectors:[["app-categorias-productor"]],decls:13,vars:4,consts:[["loadingTemplate",""],["noCategorias",""],[1,"categorias-container"],[1,"categorias-header"],[1,"btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"header-content"],["class","btn btn--primary",3,"click",4,"ngIf"],["class","form-container",4,"ngIf"],["class","categorias-content",4,"ngIf","ngIfElse"],[1,"btn","btn--primary",3,"click"],[1,"fas","fa-plus"],[1,"form-container"],[1,"form-card"],[1,"form-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"categoria-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"image-upload-container"],["class","image-preview",4,"ngIf"],["class","image-placeholder",4,"ngIf"],[1,"upload-controls"],["type","file","id","imagen","accept","image/jpeg,image/jpg,image/png,image/gif,image/webp",1,"file-input",3,"change"],["for","imagen",1,"btn","btn--outline"],[1,"fas","fa-upload"],["type","button","class","btn btn--outline btn--danger",3,"click",4,"ngIf"],["class","upload-hint",4,"ngIf"],[1,"form-row"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre","placeholder","Ej: Frutas, Verduras, L\xe1cteos",1,"form-control"],["class","field-error",4,"ngIf"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","4","placeholder","Describe qu\xe9 tipo de productos incluye esta categor\xeda...",1,"form-control"],[1,"form-actions"],["type","button",1,"btn","btn--outline",3,"click"],["type","submit",1,"btn","btn--primary",3,"disabled"],["class","fas fa-save",4,"ngIf"],["class","button-spinner",4,"ngIf"],[1,"image-preview"],["alt","Vista previa",1,"preview-image",3,"src"],["class","upload-overlay",4,"ngIf"],[1,"upload-overlay"],[1,"spinner"],[1,"image-placeholder"],[1,"fas","fa-image"],["type","button",1,"btn","btn--outline","btn--danger",3,"click"],[1,"upload-hint"],[1,"field-error"],[4,"ngIf"],[1,"fas","fa-save"],[1,"button-spinner"],[1,"categorias-content"],["class","categorias-grid",4,"ngIf","ngIfElse"],[1,"categorias-grid"],["class","categoria-card",4,"ngFor","ngForOf"],[1,"categoria-card"],[1,"categoria-image"],[3,"error","src","alt"],[1,"categoria-content"],[1,"categoria-actions"],["title","Editar categor\xeda",1,"btn-action","btn-action--edit",3,"click"],[1,"fas","fa-edit"],["title","Eliminar categor\xeda",1,"btn-action","btn-action--delete",3,"click"],[1,"fas","fa-trash"],[1,"empty-state"],[1,"empty-icon"],[1,"fas","fa-tags"],[1,"loading-container"]],template:function(i,n){if(1&i){const d=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"button",4),t.bIt("click",function(){return c.eBV(d),c.Njj(n.goBack())}),t.nrm(3,"i",5),t.EFF(4," Volver al Dashboard "),t.k0s(),t.j41(5,"div",6)(6,"h1"),t.EFF(7,"Gesti\xf3n de Categor\xedas"),t.k0s(),t.DNE(8,m,3,0,"button",7),t.k0s()(),t.DNE(9,y,42,14,"div",8)(10,A,4,2,"div",9)(11,B,4,0,"ng-template",null,0,t.C5r),t.k0s()}if(2&i){const d=t.sdS(12);t.R7$(8),t.Y8G("ngIf",!n.showForm),t.R7$(),t.Y8G("ngIf",n.showForm),t.R7$(),t.Y8G("ngIf",!n.loading)("ngIfElse",d)}},dependencies:[u.MD,u.Sq,u.bT,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD],styles:[".categorias-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f8fafc;padding:20px}.categorias-header[_ngcontent-%COMP%]{margin-bottom:30px}.categorias-header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:none;border:none;color:#64748b;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:8px;margin-bottom:15px;padding:8px 0;transition:color .3s ease}.categorias-header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{color:#4caf50}.categorias-header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.categorias-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:20px}.categorias-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#1a202c;margin:0}.form-container[_ngcontent-%COMP%]{margin-bottom:30px}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:25px 30px;border-bottom:1px solid #e2e8f0}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a202c;margin:0}.form-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#64748b;font-size:18px;cursor:pointer;padding:8px;border-radius:50%;transition:all .3s ease}.form-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;color:#ef4444}.categoria-form[_ngcontent-%COMP%]{padding:30px}.form-section[_ngcontent-%COMP%]{margin-bottom:30px}.form-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1a202c;margin:0 0 20px;padding-bottom:8px;border-bottom:2px solid #4caf50;display:inline-block}.image-upload-container[_ngcontent-%COMP%]{display:flex;gap:30px;align-items:flex-start}@media (max-width: 768px){.image-upload-container[_ngcontent-%COMP%]{flex-direction:column;gap:20px}}.image-preview[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;border-radius:12px;overflow:hidden;border:3px solid #e2e8f0;background-color:#f8fafc}.image-preview[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-preview[_ngcontent-%COMP%]   .upload-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#000000b3;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff}.image-preview[_ngcontent-%COMP%]   .upload-overlay[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid rgba(255,255,255,.3);border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:8px}.image-preview[_ngcontent-%COMP%]   .upload-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin:0}.image-placeholder[_ngcontent-%COMP%]{width:150px;height:150px;border:3px dashed #cbd5e0;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#f8fafc;color:#a0aec0}.image-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;margin-bottom:8px}.image-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin:0;text-align:center}.upload-controls[_ngcontent-%COMP%]{flex:1}.upload-controls[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}.upload-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;cursor:pointer;margin-bottom:10px;margin-right:10px}.upload-controls[_ngcontent-%COMP%]   .btn--danger[_ngcontent-%COMP%]{color:#ef4444;border-color:#ef4444}.upload-controls[_ngcontent-%COMP%]   .btn--danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#ef4444;color:#fff}.upload-controls[_ngcontent-%COMP%]   .upload-hint[_ngcontent-%COMP%]{font-size:14px;color:#64748b;margin:10px 0 0}.upload-controls[_ngcontent-%COMP%]   .upload-hint[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#9ca3af}.form-row[_ngcontent-%COMP%]{margin-bottom:20px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#374151;margin-bottom:8px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:16px;transition:all .3s ease;background-color:#fff}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 0 3px #4caf501a}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px;font-family:inherit}.field-error[_ngcontent-%COMP%]{margin-top:8px;font-size:14px;color:#ef4444;font-weight:500}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:flex-end;padding-top:20px;border-top:1px solid #e2e8f0;margin-top:30px}@media (max-width: 768px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}}.btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:8px;font-weight:600;text-decoration:none;display:inline-flex;align-items:center;gap:8px;border:none;cursor:pointer;transition:all .3s ease;justify-content:center;min-width:120px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn--primary[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn--primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#45a049;transform:translateY(-1px)}.btn--outline[_ngcontent-%COMP%]{background:transparent;color:#4caf50;border:2px solid #4caf50}.btn--outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#4caf50;color:#fff}.button-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.categorias-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.categorias-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.categoria-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden;transition:all .3s ease;position:relative}.categoria-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #00000026}.categoria-image[_ngcontent-%COMP%]{height:180px;overflow:hidden}.categoria-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.categoria-card[_ngcontent-%COMP%]:hover   .categoria-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.categoria-content[_ngcontent-%COMP%]{padding:20px}.categoria-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1a202c;margin:0 0 10px}.categoria-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0;line-height:1.5;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.categoria-actions[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;display:flex;gap:8px;opacity:0;transition:opacity .3s ease}.categoria-card[_ngcontent-%COMP%]:hover   .categoria-actions[_ngcontent-%COMP%]{opacity:1}.btn-action[_ngcontent-%COMP%]{width:40px;height:40px;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.btn-action[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.btn-action--edit[_ngcontent-%COMP%]{background:#3b82f6e6;color:#fff}.btn-action--edit[_ngcontent-%COMP%]:hover{background:#3b82f6;transform:scale(1.1)}.btn-action--delete[_ngcontent-%COMP%]{background:#ef4444e6;color:#fff}.btn-action--delete[_ngcontent-%COMP%]:hover{background:#ef4444;transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 20px;background:#f8fafc;border-radius:50%;display:flex;align-items:center;justify-content:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;color:#64748b}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a202c;margin:0 0 10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0 0 30px;font-size:16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e2e8f0;border-top:3px solid #4caf50;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:16px;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.categorias-container[_ngcontent-%COMP%]{padding:15px}.categorias-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.categorias-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.categoria-form[_ngcontent-%COMP%]{padding:20px}.categorias-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.categoria-actions[_ngcontent-%COMP%]{opacity:1}}"]})}return o})()},6562:(b,f,l)=>{l.d(f,{o:()=>h});var c=l(2615),u=l(9330),a=l(5479);let h=(()=>{class s{http=(0,c.WQX)(u.Qq);getProductorPorUsuario(r){return this.http.get(a.Sn.PRODUCTORES.GET_BY_USER_ID(r))}updateProductor(r,t){return this.http.put(a.Sn.PRODUCTORES.UPDATE_BY_USER_ID(r),t)}getArticulosProductor(r){return this.http.get(a.Sn.PRODUCTORES.GET_ARTICULOS_BY_PRODUCTOR(r))}createArticulo(r,t){return this.http.post(a.Sn.PRODUCTORES.CREATE_ARTICULO_BY_PRODUCTOR(r),t)}updateArticulo(r,t,m){return this.http.put(a.Sn.PRODUCTORES.UPDATE_ARTICULO_BY_PRODUCTOR(r,t),m)}deleteArticulo(r,t){return this.http.delete(a.Sn.PRODUCTORES.DELETE_ARTICULO_BY_PRODUCTOR(r,t))}getCategorias(){return this.http.get(a.Sn.CATEGORIAS.GET_ALL)}createCategoria(r){return this.http.post(a.Sn.CATEGORIAS.CREATE,r)}updateCategoria(r,t){return this.http.put(a.Sn.CATEGORIAS.UPDATE(r),t)}deleteCategoria(r){return this.http.delete(a.Sn.CATEGORIAS.DELETE(r))}getEstadisticasProductor(r){return this.http.get(`${a.Sn.PRODUCTORES.BASE}/${r}/estadisticas`)}getPedidosProductor(r){return this.http.get(a.Sn.ORDENES_VENTA_PRODUCTOR.GET_BY_PRODUCTOR(r))}static \u0275fac=function(t){return new(t||s)};static \u0275prov=c.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()}}]);