<!DOCTYPE html>
<html lang="es" 
      xmlns:th="http://www.thymeleaf.org"
        th:replace="~{layout/base :: layout(~{::title}, 
        ~{::meta[@name='description']}, 
        ~{::meta[@name='keywords']}, 
        ~{::link[@rel='canonical']}, 
        ~{::meta[@property='og:image']}, 
        null, ~{::main})}"
>
  <head>
    <title th:text="${pageTitle}">
      Cosecha en Cope - Contáctanos
    </title>

    <meta name="description" th:content="${pageDescription}" />
    <meta name="keywords" th:content="${keywords}" />
    <link rel="canonical" th:href="${canonicalUrl}" />
    <meta property="og:image" th:content="${ogImage}" />
  </head>

<body>
    <main th:fragment="content">
        
        <!-- Hero Section - Con imagen de fondo -->
        <section class="contact-hero py-5">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 mx-auto text-center py-5">
                        <h1 class="display-5 fw-bold text-white mb-3">
                            Contacto
                        </h1>
                        <p class="lead text-white mb-0">
                            ¿Tienes preguntas sobre nuestros productos o servicios? 
                            Estamos aquí para ayudarte.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Form Section - Centrado y minimalista -->
        <section class="contact-main py-5">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-6 col-md-8">
                        <div class="contact-form">
                            <form id="contactForm" class="needs-validation" novalidate>
                                <div class="row g-3">
                                    
                                    <!-- Name -->
                                    <div class="col-md-6">
                                        <label for="name" class="form-label fw-semibold">
                                            Nombre completo *
                                        </label>
                                        <input 
                                            type="text" 
                                            class="form-control" 
                                            id="name" 
                                            name="name"
                                            required
                                            placeholder="Tu nombre completo"
                                        >
                                        <div class="invalid-feedback">
                                            Por favor, introduce tu nombre.
                                        </div>
                                    </div>
                                    
                                    <!-- Email -->
                                    <div class="col-md-6">
                                        <label for="email" class="form-label fw-semibold">
                                            Email *
                                        </label>
                                        <input 
                                            type="email" 
                                            class="form-control" 
                                            id="email" 
                                            name="email"
                                            required
                                            placeholder="tu@email.com"
                                        >
                                        <div class="invalid-feedback">
                                            Por favor, introduce un email válido.
                                        </div>
                                    </div>
                                    
                                    <!-- Phone -->
                                    <div class="col-md-6">
                                        <label for="phone" class="form-label fw-semibold">
                                            Teléfono
                                        </label>
                                        <input 
                                            type="tel" 
                                            class="form-control" 
                                            id="phone" 
                                            name="phone"
                                            placeholder="+34 123 456 789"
                                        >
                                    </div>
                                    
                                    <!-- Subject -->
                                    <div class="col-md-6">
                                        <label for="subject" class="form-label fw-semibold">
                                            Asunto *
                                        </label>
                                        <select 
                                            class="form-select" 
                                            id="subject" 
                                            name="subject" 
                                            required
                                        >
                                            <option value="">Selecciona un asunto</option>
                                            <option value="info-general">Información general</option>
                                            <option value="problemas-pedido">Problemas con un pedido</option>
                                            <option value="ser-productor">Quiero ser productor</option>
                                            <option value="sugerencias">Sugerencias</option>
                                            <option value="soporte-tecnico">Soporte técnico</option>
                                            <option value="otro">Otro</option>
                                        </select>
                                        <div class="invalid-feedback">
                                            Por favor, selecciona un asunto.
                                        </div>
                                    </div>
                                    
                                    <!-- Message -->
                                    <div class="col-12">
                                        <label for="message" class="form-label fw-semibold">
                                            Mensaje *
                                        </label>
                                        <textarea 
                                            class="form-control" 
                                            id="message" 
                                            name="message"
                                            rows="5" 
                                            required
                                            placeholder="Escribe tu mensaje aquí..."
                                        ></textarea>
                                        <div class="invalid-feedback">
                                            Por favor, escribe tu mensaje.
                                        </div>
                                    </div>
                                    
                                    <!-- Privacy Policy -->
                                    <div class="col-12">
                                        <div class="form-check">
                                            <input 
                                                class="form-check-input" 
                                                type="checkbox" 
                                                id="privacy" 
                                                name="privacy"
                                                required
                                            >
                                            <label class="form-check-label small" for="privacy">
                                                Acepto la 
                                                <a href="/privacidad" class="contact-link">política de privacidad</a> 
                                                y el tratamiento de mis datos personales.
                                            </label>
                                            <div class="invalid-feedback">
                                                Debes aceptar la política de privacidad.
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Submit Button -->
                                    <div class="col-12 text-center mt-4">
                                        <button 
                                            type="submit" 
                                            class="btn btn-primary btn-lg px-5 py-2 fw-semibold rounded-3"
                                        >
                                            Enviar Mensaje
                                        </button>
                                    </div>
                                </div>
                            </form>
                            
                            <!-- Success Message -->
                            <div id="successMessage" class="alert alert-success mt-4 d-none rounded-3 text-center">
                                ¡Mensaje enviado exitosamente! Te responderemos pronto.
                            </div>
                            
                            <!-- Error Message -->
                            <div id="errorMessage" class="alert alert-danger mt-4 d-none rounded-3 text-center">
                                Hubo un error al enviar el mensaje. Por favor, inténtalo de nuevo.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="faq py-5">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 mx-auto">
                        <h2 class="h3 fw-bold text-center mb-5">
                            Preguntas Frecuentes
                        </h2>
                        
                        <div class="accordion" id="faqAccordion">
                            
                            <!-- FAQ 1 -->
                            <div class="accordion-item mb-3 rounded-3 overflow-hidden">
                                <h3 class="accordion-header">
                                    <button 
                                        class="accordion-button fw-semibold" 
                                        type="button" 
                                        data-bs-toggle="collapse" 
                                        data-bs-target="#faq1"
                                        aria-expanded="true" 
                                        aria-controls="faq1"
                                    >
                                        ¿Cómo puedo hacer un pedido?
                                    </button>
                                </h3>
                                <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Para hacer un pedido, simplemente navega por nuestro catálogo de productos, 
                                        añade los artículos que desees a tu carrito y procede al checkout. 
                                        Necesitarás crear una cuenta para completar la compra.
                                    </div>
                                </div>
                            </div>
                            
                            <!-- FAQ 2 -->
                            <div class="accordion-item mb-3 rounded-3 overflow-hidden">
                                <h3 class="accordion-header">
                                    <button 
                                        class="accordion-button collapsed fw-semibold" 
                                        type="button" 
                                        data-bs-toggle="collapse" 
                                        data-bs-target="#faq2"
                                        aria-expanded="false" 
                                        aria-controls="faq2"
                                    >
                                        ¿Cuáles son los métodos de pago aceptados?
                                    </button>
                                </h3>
                                <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Aceptamos tarjetas de crédito y débito (Visa, Mastercard), 
                                        transferencia bancaria y pago contra reembolso para pedidos superiores a 30€.
                                    </div>
                                </div>
                            </div>
                            
                            <!-- FAQ 3 -->
                            <div class="accordion-item mb-3 rounded-3 overflow-hidden">
                                <h3 class="accordion-header">
                                    <button 
                                        class="accordion-button collapsed fw-semibold" 
                                        type="button" 
                                        data-bs-toggle="collapse" 
                                        data-bs-target="#faq3"
                                        aria-expanded="false" 
                                        aria-controls="faq3"
                                    >
                                        ¿Cómo puedo convertirme en productor?
                                    </button>
                                </h3>
                                <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Si eres productor local y quieres vender tus productos en nuestra plataforma, 
                                        puedes registrarte como productor desde nuestra página de registro. 
                                        Nuestro equipo revisará tu solicitud y te contactará.
                                    </div>
                                </div>
                            </div>
                            
                            <!-- FAQ 4 -->
                            <div class="accordion-item mb-3 rounded-3 overflow-hidden">
                                <h3 class="accordion-header">
                                    <button 
                                        class="accordion-button collapsed fw-semibold" 
                                        type="button" 
                                        data-bs-toggle="collapse" 
                                        data-bs-target="#faq4"
                                        aria-expanded="false" 
                                        aria-controls="faq4"
                                    >
                                        ¿Qué zona de entrega cubrís?
                                    </button>
                                </h3>
                                <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Actualmente cubrimos toda la región de Murcia y zonas limítrofes. 
                                        Estamos trabajando para ampliar nuestra zona de entrega a otras provincias.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Additional Scripts for contact page -->
    <th:block th:fragment="additional-scripts">
        <script>
            // Form validation and submission
            (function() {
                'use strict';
                
                const form = document.getElementById('contactForm');
                const successMessage = document.getElementById('successMessage');
                const errorMessage = document.getElementById('errorMessage');
                
                form.addEventListener('submit', function(event) {
                    event.preventDefault();
                    event.stopPropagation();
                    
                    if (form.checkValidity()) {
                        // Simulate form submission
                        const formData = new FormData(form);
                        
                        // Show loading state
                        const submitBtn = form.querySelector('button[type="submit"]');
                        const originalText = submitBtn.innerHTML;
                        submitBtn.innerHTML = 'Enviando...';
                        submitBtn.disabled = true;
                        
                        // Simulate API call
                        setTimeout(() => {
                            // Reset button
                            submitBtn.innerHTML = originalText;
                            submitBtn.disabled = false;
                            
                            // Show success message
                            successMessage.classList.remove('d-none');
                            errorMessage.classList.add('d-none');
                            
                            // Reset form
                            form.reset();
                            form.classList.remove('was-validated');
                            
                            // Scroll to success message
                            successMessage.scrollIntoView({ behavior: 'smooth' });
                        }, 2000);
                    }
                    
                    form.classList.add('was-validated');
                });
            })();
        </script>
    </th:block>
</body>
</html>